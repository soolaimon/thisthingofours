var Modal=ReactModal;Modal.setAppElement(document.body);var MovieList=React.createClass({displayName:"MovieList",getInitialState:function(){return{data:[]}},thingIsCurrent:function(){return this.props.thing.id===(new Date).getFullYear()},getMoviesFromServer:function(){$.ajax({url:this.props.url,dataType:"json",cache:!1,type:"GET",success:function(a){this.setState({data:a})}.bind(this),error:function(a,b,c){console.error(this.props.url,b,c.toString())}.bind(this)})},componentDidMount:function(){document.title=this.props.thing.name||"This Thing of Ours",this.getMoviesFromServer()},render:function(){var a=this.state.data.map(function(a){return React.createElement(MovieTile,{movie:a})});return this.thingIsCurrent()&&a.push(React.createElement(MovieTile,{thing:this.props.thing})),React.createElement("div",{className:"container"},React.createElement("h1",null,this.props.thing.name),a)}}),MovieResult=React.createClass({displayName:"MovieResult",handleClick:function(){this.props.movieSet(this.props.movie.rt_id)},render:function(){var a=$.parseJSON(this.props.movie.cast.replace(/=>/g,":")).map(function(a,b){return a.name}).join(" , ");return React.createElement("li",{onClick:this.handleClick,className:"movie-result"},React.createElement("img",{className:"movie-thumb",src:this.props.movie_rt_poster_original}),React.createElement("h4",null,this.props.movie.title," (",this.props.movie.release_year,")"),React.createElement("p",null,a))}}),MovieForm=React.createClass({displayName:"MovieForm",getInitialState:function(){return{movie_id:null,results:[]}},setMovie:function(a){this.setState({movie_id:a,results:[]})},search:function(){var a=React.findDOMNode(this.refs.title).value;a.length<3||$.ajax({url:this.props.url,dataType:"json",type:"GET",data:{query:a},success:function(a){this.setState({results:a})}.bind(this),error:function(a,b,c){console.error(this.props.url,b,c.toString())}.bind(this)})},render:function(){var a=this,b=this.state.results.map(function(b,c){return React.createElement(MovieResult,{movieSet:a.setMovie,movie:b})});return React.createElement("div",null,React.createElement("div",null,React.createElement("input",{className:"form-control",type:"text",ref:"title",onKeyUp:this.search,placeholder:"Search Film"}),React.createElement("input",{type:"hidden",ref:"rt_id",value:this.state.movie_id})),React.createElement("div",null,React.createElement("ul",{className:"result-list"},b)))}}),MovieTile=React.createClass({displayName:"MovieTile",getInitialState:function(){return{modalIsOpen:!1}},openModal:function(){this.setState({modalIsOpen:!0})},closeModal:function(){this.setState({modalIsOpen:!1})},showMovieDetails:function(){console.log("NEED TO SHOW DETAILS, YO")},render:function(){const a={overlay:{position:"fixed",backgroundColor:"#eee"},content:{}};return this.props.movie?React.createElement("div",null,React.createElement("div",{onClick:this.showMovieDetails,className:"movie-tile col-md-3"},React.createElement("img",{src:this.props.movie.rt_poster_detailed}),React.createElement("h4",null,this.props.movie.title),React.createElement("p",null,this.props.movie.description))):React.createElement("div",null,React.createElement("div",{onClick:this.openModal,className:"movie-tile col-md-3 new-movie-tile"},React.createElement("i",{className:"fa fa-plus fa-5x"})),React.createElement(Modal,{thing:this.props.thing,isOpen:this.state.modalIsOpen,onRequestClose:this.closeModal,style:a},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("h1",null,"Add a Movie")),React.createElement("div",{className:"modal-body"},React.createElement(MovieForm,{thing_id:this.props.thing.id,url:"/movie_search"})))))}}),TimelineThing=React.createClass({displayName:"TimelineThing",handleClick:function(){React.unmountComponentAtNode(document.getElementById("movie-list")),React.render(React.createElement(MovieList,{thing:this.props.thing,url:"/things/"+this.props.thing.id+"/movies.json"}),document.getElementById("movie-list"))},render:function(){return React.createElement("div",{className:"timeline-year",onClick:this.handleClick},this.props.thing.id)}}),Timeline=React.createClass({displayName:"Timeline",getInitialState:function(){return{data:[]}},componentDidMount:function(){$.ajax({url:"/things.json",dataType:"json",cache:!1,type:"GET",success:function(a){this.setState({data:a})}.bind(this),error:function(a,b,c){console.error("/things.json",b,c.toString())}.bind(this)})},render:function(){var a=this.state.data.map(function(a){return React.createElement(TimelineThing,{thing:a})});return React.createElement("div",{className:"left-nav"},a)}});React.render(React.createElement(Timeline,null),document.getElementById("thing-sidebar"));